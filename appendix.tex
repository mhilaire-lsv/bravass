

\section{Resilience when $\Safe$ and $\Bad$ have the same closure properties}

We relax for now the hypothesis that $\Bad$ is the complement of $\Safe$, thus it is possible for $\Safe$ and $\Bad$ to share closure properties, i.e. for them to be both downward-closed or upward-closed, and we explore both possiblities.


\subsection{Case: $\Bad=\downarrow \Bad$ and $\Safe=\downarrow \Safe$}\label{case down down}

% In the case \Safe and \Bad are both downward-closed, they can both be finite.
We start with the case $\Safe = \downarrow \Safe$ and $\Bad = \downarrow \Bad$.
%
Unfortunately, in this case the resilience problem is undecidable.

\begin{theorem}\label{down-down}
The {\sc Resilience problem} is undecidable for  effective WSTS with  strong  compatibility such that
%	with more than one minimal element, 
$\Safe=\downarrow \Safe$
and $\Bad=\downarrow \Bad$.
\end{theorem}

\begin{proof}
If the set $S$ of a WSTS $\mathscr{S}=(S,\rightarrow, \leq)$ has an unique minimal element $m$, then $m$ belongs to both $\Safe$ and $\Bad$ which contradicts the assumption $\Safe \cap \Bad= \emptyset$. So let us consider the case of a set $S$ with at least two minimal elements $m_1$ and $m_2$.
The problem of whether $m_2$ is reachable from $m_1$ reduces itself to the resilience problem by considering $\Safe=\downarrow m_2 = \{ m_2\}$ and $\Bad=\downarrow m_1 = \{ m_1\}$. By undecidability of the reachability problem for effective WSTS with strong compatibility we conclude.  
\end{proof}


\subsection{Case: $\Bad=\uparrow \Bad$ and $\Safe=\uparrow \Safe$.}\label{case up up}


% \alain{2 clos par le haut ont une intersection non vide....}

We now consider the case where $\Safe = \uparrow \Safe$ and $\Bad$ is not the complement of 
$\Safe$ and we'd want $\Bad$ to have the same closure properties as $\Safe$.
We still however maintain the hypothesis that $\Bad \cap \Safe = \emptyset$, thus the subcase 
$\Safe = \uparrow \Safe$ and $\Bad = \uparrow \Bad$ leads to a contradiction, since two upward-closed sets have not an empty intersection. We thus consider instead the case where $\Bad$ is as upward-closed
as it can be without intersecting with $\Safe$,
i.e. 
such that there exists an upward-closed set $U$
such that $\Bad = U \setminus \Safe$.



\begin{theorem}\label{up-up}
The resilience problem is decidable for effective WSTS with effective pred-basis, $\Safe=\uparrow \Safe$
and $\Bad= U \setminus \Safe$ with $U = \uparrow U$.
\end{theorem}


\begin{proof}
Since $\Safe=\uparrow \Safe$ is upward-closed, there exists a finite basis $B_{ \Safe}$ such that $\uparrow \Safe = \uparrow B_{\Safe}$. 
Moreover since $\mathscr{S}=(S,\rightarrow,\leq)$ is a WSTS,  $\pred^*(\Safe)=\uparrow \pred^*(\Safe)$ and $\pred^*(\Safe)$ admits a finite basis $B_{\pred^*(\Safe)}$. Since $\mathscr{S}=(S,\rightarrow,\leq)$ is a WSTS  with effective pred-basis, we may compute a finite basis of $\pred^*(\Safe)$ with the backward coverability algorithm. 
Since $U$  is upward-closed, there exists a finite basis $B_{U}$ such that $U = \uparrow B_{U}$. % Moreover $ \uparrow B_{\Bad} \subseteq \uparrow B_{\pred^*(\Safe)}$ iff for every $b \in B_{\Bad}$, there is a $s \in B_{\pred^*(\Safe)}$ such that $s \leq b$.
Since $\Bad = U \setminus \Safe$, $\Bad \subseteq \uparrow B_{\pred^*(\Safe)}$ iff for every $b \in B_{U}$, there is either $s \in B_{\pred^*(\Safe)}$ such that $s \leq b$, either $t \in B_{\Safe}$ such that $t\leq b$,
% si on est dans up Bad, il faut que ou bien on soit dans pred(Safe) ou bien on soit dans Safe
hence the resilience problem is decidable.
\end{proof}

\begin{proposition}
In WSTS with strong compatibility and effective pred-basis,  $\Safe=\uparrow \Safe$, the bounded resilience problem is equivalent to the resilience problem.
\end{proposition}

\begin{proof}
Since $\Safe=\uparrow \Safe$ and
$\mathscr{S}=(S,\rightarrow,\leq)$ is a WSTS with strong %upward-
compatibility, then $\pred^{\leq n}(\Safe)= \uparrow~\pred^{\leq n}(\Safe)$ for all $n \in \N$,
% \alain{$\pred^n$ ou $\pred^{\leq n}$ ? même question pour post. et où est-ce défini ?}
and there exists $n_0 \in \N$ such that 
$\pred^{\leq n_0}(\Safe) = \uparrow \pred^{\leq n_0}(\Safe) = \uparrow \pred^*(\Safe) = \pred^*(\Safe)$.
Hence the equivalence.
\end{proof}

\begin{corollary}\label{B-up-up}
The bounded resilience problem is decidable for WSTS with effective pred-basis,
strong compatibility
 $\Safe=\uparrow \Safe$
and $\Bad=U \setminus \Safe$ with $U = \uparrow U$.
\end{corollary}


\begin{theorem}\label{k-up-up}
The % three %uniform 
$k$-resilience problem is decidable for WSTS with effective pred-basis, strong %upward-
compatibility, $\Safe=\uparrow \Safe$
and $\Bad=U \setminus \Safe$  with $U = \uparrow U$.
%	and \Bad is upward-closed or downward-closed.
\end{theorem}

\begin{proof}
Since $\Safe=\uparrow \Safe$ is upward-closed, there exists a finite basis $B_{ \Safe}$ such that $\uparrow \Safe = \uparrow B_{\Safe}$. 
Moreover since $\mathscr{S}=(S,\rightarrow,\leq)$ is a WSTS with strong (upward) compatibility,  $\pred^{\leq n}(\Safe)=\uparrow \pred^{\leq n}(\Safe)$ for all $n\in \N$ and $\pred^{\leq k}(\Safe)$ admits a finite basis $B_{\pred^{\leq k}(\Safe)}$. % Since $\mathscr{S}=(S,\rightarrow,\leq)$ is a WSTS  with effective pred-basis, we may compute a finite basis of $\pred^{\leq k}(\Safe)$ with the backward coverability algorithm. 
Since $U$  is upward-closed, there exists a finite basis $B_{U}$ such that $U = \uparrow B_{U}$. % Moreover $ \uparrow B_{\Bad} \subseteq \uparrow B_{\pred^{\leq k}(\Safe)}$ iff for every $b \in B_{\Bad}$, there is a $s \in B_{\pred^*(\Safe)}$ such that $s \leq b$.
Since $\Bad = U \setminus \Safe$, $\Bad \subseteq \uparrow B_{\pred^{\leq k}(\Safe)}$ iff for every $b \in B_{U}$, there is either $s \in B_{\pred^{\leq k}(\Safe)}$ such that $s \leq b$, either $t \in B_{\Safe}$ such that $t\leq b$,
% si on est dans up Bad, il faut que ou bien on soit dans pred(Safe) ou bien on soit dans Safe
hence the resilience problem is decidable.
\end{proof}


\section{Reductions to reset-VASS}

Most of our undecidability results make use of reset-VASS, which are WSTS, and for which several problems are undecidable, including reachability~\cite{araki1976PN, dufourd1998reset}. This has consequences for {\sc Resilience}. For instance in the case $\Safe = \downarrow \Safe$, it is possible for $\Safe$ to be a singleton element. Even then, though, {\sc Resilience} (resp. {\sc State-resilience}) is not strictly reachability, and we will need to delve more into the details to obtain undecidability results. 

This section is dedicated to studying reset-VASS for showing undecidability of {\sc Resilience} and {\sc State-resilience} for WSTS in general. 

\subsection{Home-state is undecidable for Minsky machine, reset-VASS and thus, WSTS}\label{HS-Minsk}


We mentionned in Section~$3$ that {\sc Resilience} is undecidable for WSTS in general when $\Safe = \downarrow \Safe$ hence $\Bad = \uparrow \Bad$. Let us provide a more detailed undecidability proof here.

First, let us recall the home-state problem

\problemx{Home-state}
{A transition system $\mathscr{S}=(S,\rightarrow)$ and a state $s \in S$.}
{$S \longrightarrow^{*} \{s\}$ ?\newline}

% whether a state $s$ is such that, for all state $s_0$ there exists a path from $s_0$ to $s$.

Home-state is undecidable for Minsky machine with $3+$ counters.
This stems from the fact $2$-counter Minsky machine termination is undecidable~\cite{Min61, Min67}.
From a $2$-counter Minsky machine $M$, one can construct a $3$-counter Minsky machine $M'$ 
such that the Minsky machine $M$ terminates for all inputs iff the Minsky machine $M'$ can reach $(0,0,0)$ from any input with at least $1$ on its third counter. We build $M'$ to simulate $M$ until it reaches a control state indicative of termination, then lower the first two counters until they reach $0$, then finally lower the third counter until it reaches $0$.
% Home-state indécidable pour les Minsky machine (preuve très rapide: M à $2$ compteurs s'arrête ssi M' visite $(0,0,0)$ depuis $\uparrow(0,0,1)$, où M' est M mais avec un troisième compteur qui commence à $1$ et qui simule M jusqu'à ce que M s'arrête et à ce moment là décroit les deux premiers compteurs puis le troisième et atteint $(0,0,0)$).
% or les minsky machine peuvent être simulées par les reset petri nets, on réduit le home-state des minsky machine au home-state des reset petri nets, ce qui donne l'indécidabilité du home-state pour les WSTS en général.
Thus {\sc Home-state} is undecidable for Minsky machines, and hence {\sc Resilience} is undecidable.


Executions of Minsky machines can be simulated by reset-VASS~\cite{araki1976PN}. 
% Let us recall more formally what a reset-VASS is.
Reset-VASS extend the basic VASS model with special “reset
transitions” that resets (set to $0$) some coordinates in the vector. Let us recall their definition here.
\begin{definition}
A {\em reset-VASS} in dimension $d$ (Reset $d$-VASS for short) is a finite 
labeled directed graph $V = (Q,T)$, where $Q$ will be referred to as the {\em control-states} of $V$, and where 
$T \subseteq Q \times Op \times Q$
 will be referred to as the {\em control-transitions} of $V$,
where $Op = \{ add(\textbf{z}) \mid \textbf{z} \in \mathds{Z}^d\} \cup 
		\{ reset(i) \mid i \in \{1,\ldots,d\} \}$.
\end{definition}

Again $Q \times \N^d$
 denotes the set of configurations of $V$.
For every configurations $p(\textbf{u}), q(\textbf{v}) \in Q \times \N^d$ and every control-transition $t$ we write
$p(\textbf{u}) \xrightarrow{t} q(\textbf{v})$ when 
\begin{samepage}\begin{itemize}
\item  $t = (q,add(\textbf{z}),q') \in T$
% then for all $\textbf{u} \in \N^d$ such that  
% $\textbf{u}+\textbf{z} \geq 0$
% $q(\textbf{u}) \xrightarrow{\textbf{z}} q'(\textbf{u}+\textbf{z})$,
and $\textbf{u}+\textbf{z} = \textbf{v} \geq 0$,
\item $t = (q,reset(\gamma),q') \in T$ 
% then for all $\textbf{u} \in \N^d$ 
% $q(\textbf{u}) \xrightarrow{z} q'(\textbf{u}')$,  where 
and
$\textbf{v}[\gamma] = 0$, and $\textbf{v}[\gamma'] = \textbf{u}[\gamma']$ for all $\gamma' \in \{1,\ldots, d\} \setminus \gamma$.
\end{itemize} \end{samepage}

It is well known that Reset $d$-VASS are WSTS~\cite{dufourd1998reset}. 
Since Reset-VASS can simulate executions of a Minsky machine, {\sc Resilience} is undecidable for reset-VASS and hence for WSTS in general as well.


\subsection{Reset-VASS and state-resilience}\label{appendix}

We are now interested in the 
%following
 undecidable \cite{araki1976PN} decision problem of {\em zero-reachability} in Reset $d$-VASS, which consists in, given a
Reset $d$-VASS $V=(Q,T)$, and $p(\textbf{u}) \in Q \times \N^d$,
deciding whether $\exists q \in Q ~ p(\textbf{u}) \to^* q(\textbf{0})$.
%
We reduce the zero-reachability problem to the problem of deciding whether a control-transition is live, that is, whether it is always ,
which we then reduce to {\sc State-resilience}.
A control-transition $t$ of a Reset $d$-VASS is {\em live} in a configuration $r(\textbf{w})$ if for each $q(\textbf{v}) \in \post^*(r(\textbf{w}))$ there exists a 
 $p(\textbf{u})$ with $q(\textbf{v}) \to^* p(\textbf{u})$ such that $t$ is enabled in $p(\textbf{u})$. We say the whole Reset $d$-VASS is live if all its control-transitions are
live. This leads to the following problem.

\problemx{$t$-liveness}
{Reset $d$-VASS $V=(Q,T)$, $t \in T$, initial configuration $s_0$}
{Is $t$ live in $s_0$ ? \\}


To better discuss $t$-liveness let us define more formally the set of configurations such that $t$ is enabled
$pre(t)=\{ p(\textbf{u}) \in S \mid \exists q(\textbf{v})$ such that $ p(\textbf{u}) \xrightarrow{t} q(\textbf{v}) \}$.



\begin{proposition}\label{reductions}
{\sc $t$-liveness} is reducible to {\sc State-resilience} in Reset $d$-VASS.
\end{proposition}


\begin{proof}
We reformulate $t$-liveness 
in a 
% WSTS $\mathscr{S}=(S,\rightarrow, \leq)$ with an initial state $s_0$ 
Reset $d$-VASS $(Q,T)$ 
with initial configuration $s_0$
as the following formula
\[ ~ \forall p(\textbf{u}) \in Q \times \N^d, 
~ s_0 \rightarrow^* p(\textbf{u}) \implies \exists q(\textbf{v}) \in U_t, ~ p(\textbf{u}) \rightarrow^{*} q(\textbf{v})\]
where
$U_t=\uparrow pre(t)$ 
is the upward closure of the preconditions to fire transition $t$.  
The problem reduces itself to {\sc State-resilience}
where $\Safe = U_t$.
\end{proof}


The following theorem is a transposition of Theorem~5.5 from \cite{peterson1981petri} from Petri nets to reset-VASS%, whose proof can be seen in Appendix~\ref{appendix}%
.
\begin{proposition}\label{liveness reset}
The  zero reachability problem can be reduced to the $t$-liveness problem in reset-VASS.
\end{proposition}

% \section{Proof of Theorem~\ref{liveness reset}}\label{appendix}

% Recall Theorem~\ref{liveness reset}.

\mathieu{À refaire avec des Reset VASS}

%\begin{proposition}\label{liveness reset}
% The  zero reachability problem can be reduced to the $t$-liveness problem in reset-VASS.
%\end{proposition}

Let us describe therein how to adjust Theorem~5.5 from \cite{peterson1981petri}.

\begin{proof}
If we wish to determine if $0 \in R(C_1, \mu_1)$ in any
reset Petri net $C_1 = (P_1, T_1, I_1, O_1, R_1 )$ (where $R_1(t) =$ places that are reset when t fires off), with initial marking $\mu_1$, we construct a
reset petri net $C_2 = (P_2, T_2, I_2, O_2, R_2 )$ with initial marking
$\mu_2$ which is live if and only if the zero marking is not reachable from $\mu_1$.

The reset PN $C_2$ is constructed from $C_1$ by the addition of two places $r_1$ and $r_2$
and $|P_1| +2$ transitions $s$, $\{ s_p | p \in P_1 \}$ and $s'$.

We first modify all transitions of $T_1$ to include $r_1$ as both an input and an output.
The initial marking $\mu_2$ will include a token in $r_1$. 


The place $r_1$ is a 'run' place; as long as the token remains in $r_1$ the transitions of $T_1$ can fire normally.
Thus any marking which is reachable in the places of $P_1$ is also reachable in $C_2$.



Transition $s$ is defined to have $r_1$ as an input and a null output.
This allows the token in $r_1$ to be removed, disabling all transitions in $T_1$
and "freezing" the marking of $P_1$.

Note that all transitions of $T_1$ are in conflict and, by construction if not by definition, no more than one transition can fire at a time.

The place $r_1$ and transition $s$ allow the net $C_1$ to reach any reachable marking and then for $s$ to fire and freeze the net at that marking.

Now we need to see if that marking is zero.

We introduce a new place $r_2$ and new transitions $s_p$ which have $p$ as input and $r_2$ as output.

If $p$ can ever become zero, $s_p$ is not live. The entire net is dead if
$s$ fires in the marking zero.

If we can always have some $p_i$ not be zero, then we can always fire some $s_{p_i}$, putting a token in $r_2$.

In this case we must put a token back in $r_1$ and assure that all transitions in $C_2$ are live.
We must be sure that $C_2$ is live even if $C_1$ is {\em not} live.
This is accomplished by a transition $s'$ which  "floods" the net $C_2$ with tokens, assuring that every transition is live if a token is ever put in $r_2$.
Transition $s'$ has $r_2$ as its input and every place of $C_2$ as output

Now if $0$ is reachable
in $R(C_1, \mu_1)$ 
then the net $C_2$ can also reach this marking
in the place of $P_1$ by executing the same sequence of transition firings.
Then $s$ can fire, freezing the $C_1$ subset.
Since $mu(p_i) = 0$ for all $p_i \in P_1$, no transition $s_{p_i}$ with $p_i \in P_1$ can fire, and $C_2$ is dead.
Thus if $0$ is reachable then $C_2$ is not live.

Conversey, if $C_2$ is not live, then a marking $\mu$ must be reachable in which 
$\mu(r_2) = 0$ and there is no reachable state in which $r_2$ has a token
(in particular, since we do not allow token removal from $r_2$, the marking $\mu$ must be reached in a sequence of transitions that do not place any token in $r_2$.)
% (Rappel: tant que il y a un token quelque part, on peut mettre un token en r_2
% et r_2 commence sans token)
If $r_2$ has no token and cannot get any, then the transitions $s_p$ are not live, and the markings of $p$ for $p \in P_1$ must be zero. 
Thus if $C_2$ is not live then a marking is reachable in which the marking of each $p$ in $P_1$ is zero. 
\end{proof}


Since the zero-reachability problem for Reset $d$-VASS is undecidable, the reduction implies 
% the following:
%
%
{\sc %$ Reset $d$-VASS 
$t$-liveness} is undecidable.

Since {\sc $t$-liveness} is undecidable, from Proposition~\ref{reductions},  we deduce that {\sc State-resilience} is undecidable  for Reset $d$-VASS, which are WSTS with strong compatibility. Hence {\sc State-resilience} is undecidable  for WSTS with strong upward-compatibility. %This undecidability result furthermore implies the undecidability of the other two state resilience problems by straightforward reductions.



\section{More Appendix thing if necessary}\label{appendix brp VASS}

\begin{theorem*}{\textbf{\ref{brp VASS}}.}
{\sc $k$-resilience }  and {\sc Bounded resilience} in VASS when $\Bad = \uparrow \Bad$ and $\Safe = S \setminus \Bad$ are decidable%, and moreover {\sc $k$-resilience } is in $\EXPSPACE$
.
\end{theorem*}

\begin{proof}
Let $V$ be a given $d$-VASS and consider a given $k \in \N$.
Consider $\Bad \subseteq Q \times \N^d$ upward-closed and 
% $\Safe \subseteq Q \times \N^d$
$\Safe = S \setminus \Bad$
 downward-closed.
Let us call $c_{\max}$ the maximal absolute value of a constant appearing in a coordinate of a transition.

The set $\Bad$ admits a finite basis 
$B_\Bad = \{ q_{i_1}(\textbf{v}_{i_1}), q_{i_2}(\textbf{v}_{i_2}), \ldots,
q_{i_m}(\textbf{v}_{i_m}) \}$.
Consider $\textbf{v}_{\Bad} = \Sigma_{1 \leq j \leq m} \textbf{v}_{i_j}$,
and then consider 
$\textbf{u}_k = \textbf{v}_{\Bad} + (k+1) \cdot (c_{\max}, c_{\max}, \ldots, c_{\max})$.
For all $p \in Q$, all configurations reachable from $p(\textbf{u}_k)$ in $k$ or less steps are 
of the form $q(\textbf{v})$ with $ \textbf{v} > \textbf{v}_{\Bad}$.

For all $q \in Q$, either there is an element of the basis of $\Bad$ with state $q$ \----
then $q(\textbf{v})$ with $\textbf{v} > \textbf{v}_{\Bad}$ is necessarily in $\Bad$ by upward closure; if this hold for all $q \in Q$, then $k$-resilience does not hold \---- either there is none. If there is none, then 
% $q'(\omega)$
$\uparrow q(\textbf{0})$
 is in the complement of $\Bad$, i.e. $\Safe$.

Let us assume from now on 
% $q_{j_1}(\omega), q_{j_2}(\omega), \ldots q_{j_\ell}(\omega)$ are
 $\uparrow q_{j_1}(\textbf{0}), \uparrow q_{j_2}(\textbf{0}), \ldots \uparrow q_{j_\ell}(\textbf{0})$ are
all subsets of $\Safe$ and that their union contain all upward-closed subsets of $\Safe$.
Because these subsets are upward-closed, we can compute a basis of
% $\pred^{\leq k}(q_{j_1}(\omega))$, $\pred^{\leq k}(q_{j_2}(\omega))$, \ldots
% $\pred^{\leq k}(q_{j_\ell}(\omega))$.
$\pred^{\leq k}(\uparrow q_{j_1}(\textbf{0}))$, $\pred^{\leq k}(\uparrow q_{j_2}(\textbf{0}))$, \ldots
$\pred^{\leq k}(\uparrow q_{j_\ell}(\textbf{0}))$.


We now consider the set 
% $\Bad \setminus (\pred^{\leq k}(q_{j_1}(\omega)) \cup \ldots \pred^{\leq k}(q_{j_\ell}(\omega)) )$.
$\Bad \setminus (\pred^{\leq k}(\uparrow q_{j_1}(\textbf{0})) \cup \ldots \cup \pred^{\leq k}(\uparrow q_{j_\ell}(\textbf{0})) )$.
% \mathieu{Is it actually possible to check whether or not it is finite ?}
% If it is finite then w
We inductively check for any element in the set whether or not it is possible to reach from it the set $\Safe$ in $k$ or less steps.
If the set is finite then we stop the procedure once we have checked found a witness that $k$-resilience does not hold or once we have checked for every element, whichever comes first.
If it is infinite then
$k$-resilience does not hold 
and we eventually find a witness that $k$-resilience does not hold.
Indeed, 
if
$\Bad \setminus (\pred^{\leq k}(\uparrow q_{j_1}(\textbf{0})) \cup \ldots \cup \pred^{\leq k}(\uparrow q_{j_\ell}(\textbf{0})) )$
is
infinite
then
there exists an element of the form $q(\textbf{u} )$
with $\textbf{u} > \textbf{v}_{\Bad} + (k+1) \cdot (c_{\max}, \ldots, c_{\max})$ 
that is in $\Bad$ but not in any of the $\pred^{\leq k}(\uparrow q_{j_i}(\textbf{0}))$,
and hence from which it is not possible at all to reach
$\Safe$ in $k$ or less steps. This also means that, even in the case where $\Bad \setminus (\pred^{\leq k}(\uparrow q_{j_1}(\textbf{0})) \cup \ldots \cup \pred^{\leq k}(\uparrow q_{j_\ell}(\textbf{0})) )$ is finite, we only need to check reachability of $\Safe$ in $k$ or less steps for the elements with vectorial component at most
$ \textbf{v}_{\Bad} + (k+1) \cdot (c_{\max}, \ldots, c_{\max})$. Binding the search space
thus leads to an $\EXPSPACE$ upper bound for {\sc $k$-resilience}.


In order to deal with {\sc Bounded resilience} now, remark that there exists some $k_0 \in \N$ for which
and hence
$\Bad \setminus (\pred^{\leq k_0}(\uparrow q_{j_1}(\textbf{0}))\cup \ldots \cup \pred^{\leq k_0}(\uparrow q_{j_\ell}(\textbf{0}))= 
\Bad \setminus (\pred^{*}(\uparrow q_{j_1}(\textbf{0})) \cup \ldots \pred^{*}(\uparrow q_{j_\ell}(\textbf{0})) )$.
We start the decision procedure by checking {\sc $k$-resilience} from $0$ until $k_0$.

From $k_0$ onwards,
$\Bad \setminus (\pred^{\leq k}(\uparrow q_{j_1}(\textbf{0}))\cup \ldots \cup \pred^{\leq k}(\uparrow q_{j_\ell}(\textbf{0}))= 
\Bad \setminus (\pred^{*}(\uparrow q_{j_1}(\textbf{0})) \cup \ldots \pred^{*}(\uparrow q_{j_\ell}(\textbf{0})) )$
is stationnary. 
If the set is finite then we stop the procedure once we have checked for every element
whether it is possible to reach $\Safe$ from it.
If it is possible to reach $\Safe$ from every element then {\sc $k_m$-resilience}
hold
for $k_m = \max(k_0, k_{\pi})$ with 
$k_{\pi}$ the maximum of the length of the paths from 
$\Bad \setminus (\pred^{\leq k_0}(\uparrow q_{j_1}(\textbf{0}))\cup \ldots \cup \pred^{\leq k_0}(\uparrow q_{j_\ell}(\textbf{0}))$ to $\Safe$.
If it is infinite then
for every $k \in \N$,
$k$-resilience does not hold, 
and we eventually find a witness that $k$-resilience does not hold.
Indeed, 
if
$\Bad \setminus (\pred^{*}(\uparrow q_{j_1}(\textbf{0})) \cup \ldots \cup \pred^{*}(\uparrow q_{j_\ell}(\textbf{0})) )$
is
infinite
then
there exists an element of the form $q(\textbf{u} )$
with $\textbf{u} > \textbf{v}_{\Bad} + (k+1) \cdot (c_{\max}, \ldots, c_{\max})$ 
that is in $\Bad$ but not in any of the $\pred^{\leq k}(\uparrow q_{j_i}(\textbf{0}))$,
and hence from which it is not possible at all to reach
$\Safe$ in $k$ or less steps.
\end{proof}

\section{More Appendix thing if necessary}\label{appendix W}





